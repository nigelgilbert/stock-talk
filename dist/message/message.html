<!DOCTYPE html>
<template id="message-template">
  <style type="text/css">
    #container {
      padding: 5px 5px 0px 5px;
      display: flex;
      border-radius: 1px;
    }
    #timestamp {
      margin: 2px;
    }
    #content {
      margin: 2px;
    }
  </style>
  <div id="container">
    <div id="timestamp"></div>
    <div id="content"></div>
  </div>
</template>

<script type="text/javascript">

  function makeTimeStamp() {
    var today = new Date();
    return "[" + today.getHours() + ":" + today.getMinutes() + "]";
  }

  var template = document.currentScript.ownerDocument.querySelector("#message-template");
  var proto = Object  .create(HTMLElement.prototype);

  proto.attachedCallback = function() {
    var stamp = makeTimeStamp();
    var clone = document.importNode(template.content, true);
    clone.querySelector("#timestamp").innerHTML = stamp;
    clone.querySelector("#content").innerHTML = this.getAttribute("text");
    this.appendChild(clone);
  };

  var messageComponent = document.registerElement("message-component", {
    prototype: proto
  });

</script>
